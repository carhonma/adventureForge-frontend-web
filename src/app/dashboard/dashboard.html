
<div class="dashboard">
  <button  class="normal-button btn-home"(click)="onMainClipClick('clipHo')"style="position: absolute">
    <div class="image-container" style="position: relative; display: inline-block;">
      <img class="background-image" style="max-width: 250px; display: block;"[src]="this.imageUrls['BOTON_madera_8']"alt="start"/>
      <div class="overlay-text"style="position: absolute;left: 80px;font-weight: bold;">HOME</div>
    </div>
  </button>
  <button  class="normal-button btn-storage"(click)="onMainClipClick('clipSto')"style="position: absolute;">
    <div class="image-container" style="position: relative; display: inline-block;">
      <img class="background-image" style="max-width: 250px; display: block;"[src]="this.imageUrls['BOTON_madera_8']"alt="start"/>
      <div class="overlay-text"style="position: absolute;left:80px;font-weight: bold;">STORAGE</div>
    </div>
  </button>
  <div *ngIf="!state"class="left-section">
    <img [src]="this.imageUrls['FONDO']" alt="imageFondo" style="width: 100%;border-radius: 5px;"/>
  </div>
  <!--heroDetails-->
  <div *ngIf="state == 'heroDetails'"class="left-section">
    <div class="top-left-overlay" [ngStyle]="{ 'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }">
      <img *ngIf="state == 'heroDetails'" [src]="hero.icon" alt="imageHero"  class="hero-image" />
    </div>
    <div class="main-content-row">
      
      <div *ngIf="state == 'heroDetails'" class="big-left-div">
        <div class="characterName" [ngStyle]="{'border': '10px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'}"style="z-index: 1;">
          <div [ngClass]="{ 'spark-container': true, 'shine-effect': showNameShine }" style="width: 100%;background-color: #7066615d;border-radius: 7px;">
            <input
              type="text"
              [placeholder]="hero.name"
              name="heroName"
              [(ngModel)]="heroNewname"
              style="width: 100%; height: 30px; padding: 0 10px; border-radius: 4px; border: 3px solid #cccccc88; background-color: #7066615d; text-align: center; font-weight: bold;"
            />
          </div>
          <button class="glow-button" *ngIf="heroNewname != hero.name" style=" margin-left: 15px;  height: 30px; width: 30px; padding: 0; border: none; background: none; cursor: pointer;"(click)="triggerShineEffect(6); changeHeroName()">
            <img [src]="this.imageUrls['EDIT']" alt="Cancelar" style=" height: 100%;background-color: #ffffff7a; border-radius: 4px;border: 1px solid #ccc;" />
          </button>
        </div>   
        <img *ngIf="state == 'heroDetails'" [src]="hero.icon" alt="imageHero" style="width: 500px;padding-top: 30px;opacity: 0.5;" />
          <!--EQUIPO-->
        <div  class="equipment">
          <div class="loading-overlay" *ngIf="isBusy">
            <div class="spinner"></div>
          </div>
          <div style="position: absolute;width: 100px;height: 100px; ;background-color: #ffffff44;transform: translate(200px,30px)" >
            <button class="glow-equipment" style="width: 100%;height: 100%; cursor: pointer;border-radius: 12px;  opacity: 0.9;"[ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
              <img [src]="this.imageUrls['MARCOITEM']" alt="MARCOITEM" style="width: 163%; height: 163%; border-radius: 12px; position: absolute; left: -25px; top: -25px;"(mousedown)="getItemsEqip(false,'HELMET')"(mouseenter)="isHoveringTooltipImage = hero.x_helmet.attributes; itemBonusBenefits = hero.x_helmet.bonusBenefits; itemBonusCollateral = hero.x_helmet.bonusCollateral; checkBonus(hero.x_helmet)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_helmet.ID!='null'"[src]="hero.x_helmet.icon" alt="HELMET" style=" width: 100%;height: 100%; border-radius: 12px;"(mousedown)="getItemsEqip(false,'HELMET')"(mouseenter)="isHoveringTooltipImage = hero.x_helmet.attributes; itemBonusBenefits = hero.x_helmet.bonusBenefits; itemBonusCollateral = hero.x_helmet.bonusCollateral; checkBonus(hero.x_helmet)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_helmet.ID=='null'"[src]="hero.x_helmet.icon" alt="HELMET" style=" width: 100%;height: 100%; border-radius: 12px;padding: 10px;background-color: #3b1e0f;"(mousedown)="getItemsEqip(false,'HELMET')"(mouseenter)="isHoveringTooltipImage = hero.x_helmet.attributes"(mouseleave)="isHoveringTooltipImage = []"/>
              <div class="equipmentTooltip" [ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
                <div *ngFor="let item of itemsToEquip" style="position: relative; display: inline-block;">
                  <img *ngIf="item"[src]="item.icon"[alt]="item.name"(mouseenter)="isHoveringTooltipImage = item.attributes; itemBonusBenefits = item.bonusBenefits; itemBonusCollateral = item.bonusCollateral; checkBonus(item)"(mouseleave)="isHoveringTooltipImage = []"style="width: 60px; height: 60px; z-index: 1;"(click)="equipHero('Helmet',hero.x_helmet.ID,item);"/>
                  <img *ngIf="item"[src]="gradeStyles[item.grade].icon"style="position: absolute; bottom: 0; left: 0; width: 20px; height: 20px; background-color: #e7a78a; border-radius: 50%; border: 2px solid #2e0b02;"/>
                </div>
                <img *ngIf="!itemsToEquip[0]"[src]="itemStyles[ItemType.NULL].icon"style="width: 60px; height: 60px; z-index: 1;opacity: 0.5;" />
              </div>
            </button>
          </div>
          <div style="position: absolute;width: 100px;height: 100px; ;background-color: #ffffff44;transform: translate(30px,200px)" >
            <button class="glow-equipment" style="width: 100%;height: 100%; cursor: pointer;border-radius: 12px;  opacity: 0.9;"[ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
              <img [src]="this.imageUrls['MARCOITEM']" alt="MARCOITEM" style="width: 163%; height: 163%; border-radius: 12px; position: absolute; left: -25px; top: -25px;"(mousedown)="getItemsEqip(false,'WEAPON')"(mouseenter)="isHoveringTooltipImage = hero.x_weapon.attributes; itemBonusBenefits = hero.x_weapon.bonusBenefits; itemBonusCollateral = hero.x_weapon.bonusCollateral; checkBonus(hero.x_weapon)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_weapon.ID!='null'"[src]="hero.x_weapon.icon" alt="WEAPON" style=" width: 100%;height: 100%; border-radius: 12px;"(mousedown)="getItemsEqip(false,'WEAPON')"(mouseenter)="isHoveringTooltipImage = hero.x_weapon.attributes; itemBonusBenefits = hero.x_weapon.bonusBenefits; itemBonusCollateral = hero.x_weapon.bonusCollateral; checkBonus(hero.x_weapon)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_weapon.ID=='null'"[src]="hero.x_weapon.icon" alt="WEAPON" style=" width: 100%;height: 100%; border-radius: 12px;padding: 10px;background-color: #3b1e0f;"(mousedown)="getItemsEqip(false,'WEAPON')"(mouseenter)="isHoveringTooltipImage = hero.weapon.attributes"(mouseleave)="isHoveringTooltipImage = []"/>
              <div class="equipmentTooltip" [ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
                <div *ngFor="let item of itemsToEquip" style="position: relative; display: inline-block;">
                  <img *ngIf="item"[src]="item.icon"[alt]="item.name"(mouseenter)="isHoveringTooltipImage = item.attributes; itemBonusBenefits = item.bonusBenefits; itemBonusCollateral = item.bonusCollateral; checkBonus(item)"(mouseleave)="isHoveringTooltipImage = []"style="width: 60px; height: 60px; z-index: 1;"(click)="equipHero('Weapon',hero.x_weapon.ID,item)"/>
                  <img *ngIf="item"[src]="gradeStyles[item.grade].icon"style="position: absolute; bottom: 0; left: 0; width: 20px; height: 20px; background-color: #e7a78a; border-radius: 50%; border: 2px solid #2e0b02;"/>
                </div>
                <img *ngIf="!itemsToEquip[0]"[src]="itemStyles[ItemType.NULL].icon"style="width: 60px; height: 60px; z-index: 1;opacity: 0.5;" />
              </div>
            </button>
          </div>
          <div style="position: absolute;width: 100px;height: 100px; ;background-color: #ffffff44;transform: translate(200px,200px)" >
            <button class="glow-equipment" style="width: 100%;height: 100%; cursor: pointer;border-radius: 12px;  opacity: 0.9;"[ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
              <img [src]="this.imageUrls['MARCOITEM']" alt="MARCOITEM" style="width: 163%; height: 163%; border-radius: 12px; position: absolute; left: -25px; top: -25px;"(mousedown)="getItemsEqip(false,'CHEST')"(mouseenter)="isHoveringTooltipImage = hero.x_chest.attributes; itemBonusBenefits = hero.x_chest.bonusBenefits; itemBonusCollateral = hero.x_chest.bonusCollateral; checkBonus(hero.x_chest)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_chest.ID!='null'"[src]="hero.x_chest.icon" alt="CHEST" style=" width: 100%;height: 100%; border-radius: 12px;"(mousedown)="getItemsEqip(false,'CHEST')"(mouseenter)="isHoveringTooltipImage = hero.x_chest.attributes; itemBonusBenefits = hero.x_chest.bonusBenefits; itemBonusCollateral = hero.x_chest.bonusCollateral; checkBonus(hero.x_chest)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_chest.ID=='null'"[src]="hero.x_chest.icon" alt="CHEST" style=" width: 100%;height: 100%; border-radius: 12px;padding: 10px;background-color: #3b1e0f;"(mousedown)="getItemsEqip(false,'CHEST')"(mouseenter)="isHoveringTooltipImage = hero.chest.attributes"(mouseleave)="isHoveringTooltipImage = []"/>
              <div class="equipmentTooltip"[ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} " >
                <div *ngFor="let item of itemsToEquip" style="position: relative; display: inline-block;">
                  <img *ngIf="item"[src]="item.icon"[alt]="item.name"(mouseenter)="isHoveringTooltipImage = item.attributes; itemBonusBenefits = item.bonusBenefits; itemBonusCollateral = item.bonusCollateral; checkBonus(item)"(mouseleave)="isHoveringTooltipImage = []"style="width: 60px; height: 60px; z-index: 1;"(click)="equipHero('Chest',hero.x_chest.ID,item)"/>
                  <img *ngIf="item"[src]="gradeStyles[item.grade].icon"style="position: absolute; bottom: 0; left: 0; width: 20px; height: 20px; background-color: #e7a78a; border-radius: 50%; border: 2px solid #2e0b02;"/>
                </div>
                <img *ngIf="!itemsToEquip[0]"[src]="itemStyles[ItemType.NULL].icon"style="width: 60px; height: 60px; z-index: 1;opacity: 0.5;" />
              </div>
            </button>
          </div>
          <div style="position: absolute;width: 100px;height: 100px; ;background-color: #ffffff44;transform: translate(370px,200px)" >
            <button class="glow-equipment" style="width: 100%;height: 100%; cursor: pointer;border-radius: 12px;  opacity: 0.9;"[ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
              <img [src]="this.imageUrls['MARCOITEM']" alt="MARCOITEM" style="width: 163%; height: 163%; border-radius: 12px; position: absolute; left: -25px; top: -25px;"(mousedown)="getItemsEqip(false,'GLOVES')"(mouseenter)="isHoveringTooltipImage = hero.x_gloves.attributes; itemBonusBenefits = hero.x_gloves.bonusBenefits; itemBonusCollateral = hero.x_gloves.bonusCollateral; checkBonus(hero.x_gloves)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_gloves.ID!='null'"[src]="hero.x_gloves.icon" alt="GLOVES" style=" width: 100%;height: 100%; border-radius: 12px;"(mousedown)="getItemsEqip(false,'GLOVES')"(mouseenter)="isHoveringTooltipImage = hero.x_gloves.attributes; itemBonusBenefits = hero.x_gloves.bonusBenefits; itemBonusCollateral = hero.x_gloves.bonusCollateral; checkBonus(hero.x_gloves)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_gloves.ID=='null'"[src]="hero.x_gloves.icon" alt="GLOVES" style=" width: 100%;height: 100%; border-radius: 12px;padding: 10px;background-color: #3b1e0f;"(mousedown)="getItemsEqip(false,'GLOVES')"(mouseenter)="isHoveringTooltipImage = hero.gloves.attributes"(mouseleave)="isHoveringTooltipImage = []"/>
              <div class="equipmentTooltip" [ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
                <div *ngFor="let item of itemsToEquip" style="position: relative; display: inline-block;">
                  <img *ngIf="item"[src]="item.icon"[alt]="item.name"(mouseenter)="isHoveringTooltipImage = item.attributes; itemBonusBenefits = item.bonusBenefits; itemBonusCollateral = item.bonusCollateral; checkBonus(item)"(mouseleave)="isHoveringTooltipImage = []"style="width: 60px; height: 60px; z-index: 1;"(click)="equipHero('Gloves',hero.x_gloves.ID,item)"/>
                  <img *ngIf="item"[src]="gradeStyles[item.grade].icon"style="position: absolute; bottom: 0; left: 0; width: 20px; height: 20px; background-color: #e7a78a; border-radius: 50%; border: 2px solid #2e0b02;"/>
                </div>
                <img *ngIf="!itemsToEquip[0]"[src]="itemStyles[ItemType.NULL].icon"style="width: 60px; height: 60px; z-index: 1;opacity: 0.5;" />
              </div>
            </button>
          </div>
          <div style="position: absolute;width: 100px;height: 100px; ;background-color: #ffffff44;transform: translate(200px,370px)" >
            <button class="glow-equipment" style="width: 100%;height: 100%; cursor: pointer;border-radius: 12px;  opacity: 0.9;"[ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
              <img [src]="this.imageUrls['MARCOITEM']" alt="MARCOITEM" style="width: 163%; height: 163%; border-radius: 12px; position: absolute; left: -25px; top: -25px;"(mousedown)="getItemsEqip(false,'BOOTS')"(mouseenter)="isHoveringTooltipImage = hero.x_boots.attributes; itemBonusBenefits = hero.x_boots.bonusBenefits; itemBonusCollateral = hero.x_boots.bonusCollateral; checkBonus(hero.x_boots)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_boots.ID!='null'"[src]="hero.x_boots.icon" alt="BOOTS" style=" width: 100%;height: 100%; border-radius: 12px;"(mousedown)="getItemsEqip(false,'BOOTS')"(mouseenter)="isHoveringTooltipImage = hero.x_boots.attributes; itemBonusBenefits = hero.x_boots.bonusBenefits; itemBonusCollateral = hero.x_boots.bonusCollateral; checkBonus(hero.x_boots)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_boots.ID=='null'"[src]="hero.x_boots.icon" alt="BOOTS" style=" width: 100%;height: 100%; border-radius: 12px;padding: 10px;background-color: #3b1e0f;"(mousedown)="getItemsEqip(false,'BOOTS')"(mouseenter)="isHoveringTooltipImage = hero.boots.attributes"(mouseleave)="isHoveringTooltipImage = []"/>
              <div class="equipmentTooltip" [ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
                <div *ngFor="let item of itemsToEquip" style="position: relative; display: inline-block;">
                  <img *ngIf="item"[src]="item.icon"[alt]="item.name"(mouseenter)="isHoveringTooltipImage = item.attributes; itemBonusBenefits = item.bonusBenefits; itemBonusCollateral = item.bonusCollateral; checkBonus(item)"(mouseleave)="isHoveringTooltipImage = []"style="width: 60px; height: 60px; z-index: 1;"(click)="equipHero('Boots',hero.x_boots.ID,item)"/>
                  <img *ngIf="item"[src]="gradeStyles[item.grade].icon"style="position: absolute; bottom: 0; left: 0; width: 20px; height: 20px; background-color: #e7a78a; border-radius: 50%; border: 2px solid #2e0b02;"/>
                </div>
                <img *ngIf="!itemsToEquip[0]"[src]="itemStyles[ItemType.NULL].icon"style="width: 60px; height: 60px; z-index: 1;opacity: 0.5;" />
              </div>
            </button>
          </div>
          <div style="position: absolute;width: 100px;height: 100px; ;background-color: #ffffff44;transform: translate(370px,370px)" >
            <button class="glow-equipment" style="width: 100%;height: 100%; cursor: pointer;border-radius: 12px;  opacity: 0.9;"[ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
              <img [src]="this.imageUrls['MARCOITEM']" alt="MARCOITEM" style="width: 163%; height: 163%; border-radius: 12px; position: absolute; left: -25px; top: -25px;"(mousedown)="getItemsEqip(false,'JEWEL')"(mouseenter)="isHoveringTooltipImage = hero.x_jewel.attributes; itemBonusBenefits = hero.x_jewel.bonusBenefits; itemBonusCollateral = hero.x_jewel.bonusCollateral; checkBonus(hero.x_jewel)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_jewel.ID!='null'"[src]="hero.x_jewel.icon" alt="JEWEL" style=" width: 100%;height: 100%; border-radius: 12px;"(mousedown)="getItemsEqip(false,'JEWEL')"(mouseenter)="isHoveringTooltipImage = hero.x_jewel.attributes; itemBonusBenefits = hero.x_jewel.bonusBenefits; itemBonusCollateral = hero.x_jewel.bonusCollateral; checkBonus(hero.x_jewel)"(mouseleave)="isHoveringTooltipImage = []"/>
              <img *ngIf="hero.x_jewel.ID=='null'"[src]="hero.x_jewel.icon" alt="JEWEL" style=" width: 100%;height: 100%; border-radius: 12px;padding: 10px;background-color: #3b1e0f;"(mousedown)="getItemsEqip(false,'JEWEL')"(mouseenter)="isHoveringTooltipImage = hero.jewel.attributes"(mouseleave)="isHoveringTooltipImage = []"/>
              <div class="equipmentTooltip" [ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'} ">
                <div *ngFor="let item of itemsToEquip" style="position: relative; display: inline-block;">
                  <img *ngIf="item"[src]="item.icon"[alt]="item.name"(mouseenter)="isHoveringTooltipImage = item.attributes; itemBonusBenefits = item.bonusBenefits; itemBonusCollateral = item.bonusCollateral; checkBonus(item)"(mouseleave)="isHoveringTooltipImage = []"style="width: 60px; height: 60px; z-index: 1;"(click)="equipHero('Jewel',hero.x_jewel.ID,item)"/>
                  <img *ngIf="item"[src]="gradeStyles[item.grade].icon"style="position: absolute; bottom: 0; left: 0; width: 20px; height: 20px; background-color: #e7a78a; border-radius: 50%; border: 2px solid #2e0b02;"/>
                </div>
                <img *ngIf="!itemsToEquip[0]"[src]="itemStyles[ItemType.NULL].icon"style="width: 60px; height: 60px; z-index: 1;opacity: 0.5;" />
              </div>
            </button>
          </div>

          <div *ngIf="isHoveringTooltipImage[0] > 0 || isHoveringTooltipImage[1] > 0 || isHoveringTooltipImage[2] > 0 || isHoveringTooltipImage[3] > 0 || isHoveringTooltipImage[4] > 0 || isHoveringTooltipImage[5] > 0 || isHoveringTooltipImage[6] > 0 || isHoveringTooltipImage[7] > 0 || isHoveringTooltipImage[8] > 0 " class="equipmentStatsTooltip"style="width: 120px; height: fit-content; border-radius: 12px;font-size: 16px;">
           <p *ngIf="isHoveringTooltipImage[0] > 0">Dbrutal +{{isHoveringTooltipImage[0]}}</p>
           <p *ngIf="isHoveringTooltipImage[1] > 0">Dletal +{{isHoveringTooltipImage[1]}}</p>
           <p *ngIf="isHoveringTooltipImage[2] > 0">Dmistic +{{isHoveringTooltipImage[2]}}</p>
           <p *ngIf="isHoveringTooltipImage[3] > 0">armor +{{isHoveringTooltipImage[3]}}</p>
           <p *ngIf="isHoveringTooltipImage[4] > 0">resistance +{{isHoveringTooltipImage[4]}}</p>
           <p *ngIf="isHoveringTooltipImage[5] > 0">accuracy +{{isHoveringTooltipImage[5]}}</p>
           <p *ngIf="isHoveringTooltipImage[6] > 0">evasion +{{isHoveringTooltipImage[6]}}</p>
           <p *ngIf="isHoveringTooltipImage[7] > 0">critic +{{isHoveringTooltipImage[7]}}</p>
           <p *ngIf="isHoveringTooltipImage[8] > 0">maxHealth +{{isHoveringTooltipImage[8]}}</p>

           <p *ngIf="itemBonusBenefits[0] != 0 && bonus" style="color: #5afd70;"> Dbrutal +{{itemBonusBenefits[0]}}</p>
           <p *ngIf="itemBonusBenefits[1] != 0 && bonus" style="color: #5afd70;"> Dletal +{{itemBonusBenefits[1]}}</p>
           <p *ngIf="itemBonusBenefits[2] != 0 && bonus" style="color: #5afd70;"> Dmistic +{{itemBonusBenefits[2]}}</p>
           <p *ngIf="itemBonusBenefits[3] != 0 && bonus" style="color: #5afd70;"> armor +{{itemBonusBenefits[3]}}</p>
           <p *ngIf="itemBonusBenefits[4] != 0 && bonus" style="color: #5afd70;"> resistance +{{itemBonusBenefits[4]}}</p>
           <p *ngIf="itemBonusBenefits[5] != 0 && bonus" style="color: #5afd70;"> accuracy +{{itemBonusBenefits[5]}}</p>
           <p *ngIf="itemBonusBenefits[6] != 0 && bonus" style="color: #5afd70;"> evasion +{{itemBonusBenefits[6]}}</p>
           <p *ngIf="itemBonusBenefits[7] != 0 && bonus" style="color: #5afd70;"> critic +{{itemBonusBenefits[7]}}</p>
           <p *ngIf="itemBonusBenefits[8] != 0 && bonus" style="color: #5afd70;"> maxHealth +{{itemBonusBenefits[8]}}</p>

           <p *ngIf="itemBonusCollateral[0] != 0 && collateral" style="color: #fd7b5a;"> Dbrutal {{itemBonusCollateral[0]}}</p>
           <p *ngIf="itemBonusCollateral[1] != 0 && collateral" style="color: #fd7b5a;"> Dletal {{itemBonusCollateral[1]}}</p>
           <p *ngIf="itemBonusCollateral[2] != 0 && collateral" style="color: #fd7b5a;"> Dmistic {{itemBonusCollateral[2]}}</p>
           <p *ngIf="itemBonusCollateral[3] != 0 && collateral" style="color: #fd7b5a;"> armor {{itemBonusCollateral[3]}}</p>
           <p *ngIf="itemBonusCollateral[4] != 0 && collateral" style="color: #fd7b5a;"> resistance {{itemBonusCollateral[4]}}</p>
           <p *ngIf="itemBonusCollateral[5] != 0 && collateral" style="color: #fd7b5a;"> accuracy {{itemBonusCollateral[5]}}</p>
           <p *ngIf="itemBonusCollateral[6] != 0 && collateral" style="color: #fd7b5a;"> evasion {{itemBonusCollateral[6]}}</p>
           <p *ngIf="itemBonusCollateral[7] != 0 && collateral" style="color: #fd7b5a;"> critic {{itemBonusCollateral[7]}}</p>
           <p *ngIf="itemBonusCollateral[8] != 0 && collateral" style="color: #fd7b5a;"> maxHealth {{itemBonusCollateral[8]}}</p>
           </div>
          
        </div>
        <!--////-->
      </div>

    <div *ngIf="state == 'heroDetails'" class="right-columns">
      <div class="top-columns">
        <div class="first-right-column" >
          <div class="full-column-div">
            <p>Dbrutal: {{ hero.Dbrutal }}</p>
            <p>Dletal: {{ hero.Dletal }}</p>
            <p>Dmistic: {{ hero.Dmistic }}</p>
            <p>Armor: {{ hero.armor }}</p>
            <p>Resistance: {{ hero.resistance }}</p>
            <p>Accuracy: {{ hero.accuracy }}</p>
            <p>Evasion: {{ hero.evasion }}</p>
            <p>Critic: {{ hero.critic }}</p>
            <p>MaxHealth: {{ hero.maxHealth }}</p>
            <p>MaxExp: {{ hero.maxExp }}</p>
          </div>
        </div>
        <div class="second-right-column">
          <div class="half-first-column-div">
            <h3>Level: {{ hero.level }}</h3>
            <!--Barras de vida y exp-->
            <div style="position: relative; width: 100%; margin-top: 10px;">
              <div style="position: relative; width: 100%; margin-top: 10px;">
                <div class="life-bar-container">
                  <img [src]="hero.lifeBarIcon" alt="Barra de vida" class="life-bar-image" />
                  <div class="life-overlay"style="color: #fa9d8d;margin-top: -2px;">
                    {{ hero.actualLife }} / {{ hero.maxHealth }}
                  </div>
                </div>
              </div>
              <style>div:hover > .life-overlay {opacity: 1}</style>
            </div>
            <div style="position: relative; width: 100%; margin-top: 10px;">
              <div style="position: relative; width: 100%; margin-top: 10px;">
                <div class="life-bar-container">
                  <img [src]="hero.expBarIcon" alt="Barra de exp" class="life-bar-image" />
                  <div class="life-overlay"style="font-size: 8px; color: #fad78d; margin: inherit;">
                    {{ hero.actualExp }} / {{ hero.maxExp }}
                  </div>
                </div>
              </div>
              <style>div:hover > .life-overlay {opacity: 1;}</style>
            </div>
            <!--///////////-->
          </div>
          <div class="half-second-column-div">
            <div class="background-image-obj"style="background-color: #f7d9c4bd; padding: 10px; height: 100%;display: grid; grid-template-rows: repeat(5, 1fr);">

<div style="display: flex">
  <button class="skill-button" style="width: fit-content; height: fit-content;" [ngStyle]="{ 'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }" (click)="isVisible[0] = !isVisible[0]; isVisible[1] = false; isVisible[2] = false; isVisible[3] = false; isVisible[4] = false">
    <img [src]="turnActionStyles[heroSkills[0]].icon" [alt]="hero.skill1" class="icon-img"/>
  </button>
  <!-- Este div se muestra solo si se ha hecho clic -->
  <div *ngIf="isVisible[0]" class="actions-container" style="position: absolute;display: grid;left: 68%;" [ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'), 'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }">
    <div *ngFor="let turnAction of turnActions" class="action-icon-wrapper" (mouseenter)="hoveredAction = turnAction" (mouseleave)="hoveredAction = null">
      <img *ngIf="turnAction" [src]="turnActionStyles[turnAction].icon" class="icon-img"(click)="hero.skill1 = turnAction; heroSkills[0] = turnAction; isVisible[0] =false; changeHeroSkill('s1_skill1', turnAction); triggerShineEffect(0)"/>
      <!-- Tooltip sobre la imagen -->
      <div *ngIf="hoveredAction === turnAction" class="tooltip-description"[innerHTML]="turnActionStyles[turnAction].description"></div>
    </div>
  </div>
  <!-- Información general -->
  <div class="skillButton-container">
    <p [ngClass]="{ 'spark-container': true, 'shine-effect': showSkillShine[0] }"class="skillButton"style="margin-left:10px width: 300px;margin-left: 10px;">{{ hero.skill1 }} </p>
    <div class="skillTooltip" [innerHTML]="turnActionStyles[heroSkills[0]].description"></div>
  </div>
</div>

<div style="display: flex">
  <button class="skill-button" style="width: fit-content; height: fit-content;" [ngStyle]="{ 'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }" (click)="isVisible[0] = false; isVisible[1] = !isVisible[1]; isVisible[2] = false; isVisible[3] = false; isVisible[4] = false">
    <img [src]="turnActionStyles[heroSkills[1]].icon" [alt]="hero.skill1" class="icon-img"/>
  </button>
  <!-- Este div se muestra solo si se ha hecho clic -->
  <div *ngIf="isVisible[1]" class="actions-container" style="position: absolute;display: grid;left: 68%;" [ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'), 'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }">
    <div *ngFor="let turnAction of turnActions" class="action-icon-wrapper" (mouseenter)="hoveredAction = turnAction" (mouseleave)="hoveredAction = null">
      <img *ngIf="turnAction" [src]="turnActionStyles[turnAction].icon" class="icon-img"(click)="hero.skill2 = turnAction; heroSkills[1] = turnAction; isVisible[2] =false; changeHeroSkill('s2_skill2', turnAction); triggerShineEffect(1)"/>
      <!-- Tooltip sobre la imagen -->
      <div *ngIf="hoveredAction === turnAction" class="tooltip-description"[innerHTML]="turnActionStyles[turnAction].description"></div>
    </div>
  </div>
  <!-- Información general -->
  <div class="skillButton-container">
    <p [ngClass]="{ 'spark-container': true, 'shine-effect': showSkillShine[1] }"class="skillButton"style="margin-left:10px width: 300px;margin-left: 10px;">{{ hero.skill2 }} </p>
    <div class="skillTooltip" [innerHTML]="turnActionStyles[heroSkills[1]].description"></div>
  </div>
</div>

<div style="display: flex">
  <button class="skill-button" style="width: fit-content; height: fit-content;" [ngStyle]="{ 'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }" (click)="isVisible[0] = false; isVisible[1] = false; isVisible[2] = !isVisible[2]; isVisible[3] = false; isVisible[4] = false">
    <img [src]="turnActionStyles[heroSkills[2]].icon" [alt]="hero.skill1" class="icon-img"/>
  </button>
  <!-- Este div se muestra solo si se ha hecho clic -->
  <div *ngIf="isVisible[2]" class="actions-container" style="position: absolute;display: grid;left: 68%;" [ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'), 'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }">
    <div *ngFor="let turnAction of turnActions" class="action-icon-wrapper" (mouseenter)="hoveredAction = turnAction" (mouseleave)="hoveredAction = null">
      <img *ngIf="turnAction" [src]="turnActionStyles[turnAction].icon" class="icon-img"(click)="hero.skill3 = turnAction; heroSkills[2] = turnAction; isVisible[3] =false; changeHeroSkill('s3_skill3', turnAction); triggerShineEffect(2)"/>
      <!-- Tooltip sobre la imagen -->
      <div *ngIf="hoveredAction === turnAction" class="tooltip-description"[innerHTML]="turnActionStyles[turnAction].description"></div>
    </div>
  </div>
  <!-- Información general -->
  <div class="skillButton-container">
    <p [ngClass]="{ 'spark-container': true, 'shine-effect': showSkillShine[2] }"class="skillButton"style="margin-left:10px width: 300px;margin-left: 10px;">{{ hero.skill3 }} </p>
    <div class="skillTooltip" [innerHTML]="turnActionStyles[heroSkills[2]].description"></div>
  </div>
</div>

<div style="display: flex">
  <button class="skill-button" style="width: fit-content; height: fit-content;" [ngStyle]="{ 'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }" (click)="isVisible[0] = false; isVisible[1] = false; isVisible[2] = false; isVisible[3] = !isVisible[3]; isVisible[4] = false">
    <img [src]="turnActionStyles[heroSkills[3]].icon" [alt]="hero.skill1" class="icon-img"/>
  </button>
  <!-- Este div se muestra solo si se ha hecho clic -->
  <div *ngIf="isVisible[3]" class="actions-container" style="position: absolute;display: grid;left: 68%;" [ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'), 'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }">
    <div *ngFor="let turnAction of turnActions" class="action-icon-wrapper" (mouseenter)="hoveredAction = turnAction" (mouseleave)="hoveredAction = null">
      <img *ngIf="turnAction" [src]="turnActionStyles[turnAction].icon" class="icon-img"(click)="hero.skill4 = turnAction; heroSkills[3] = turnAction; isVisible[4] =false; changeHeroSkill('s4_skill4', turnAction); triggerShineEffect(3)"/>
      <!-- Tooltip sobre la imagen -->
      <div *ngIf="hoveredAction === turnAction" class="tooltip-description"[innerHTML]="turnActionStyles[turnAction].description"></div>
    </div>
  </div>
  <!-- Información general -->
  <div class="skillButton-container">
    <p [ngClass]="{ 'spark-container': true, 'shine-effect': showSkillShine[3] }"class="skillButton"style="margin-left:10px width: 300px;margin-left: 10px;">{{ hero.skill4 }} </p>
    <div class="skillTooltip" [innerHTML]="turnActionStyles[heroSkills[3]].description"></div>
  </div>
</div>

<div style="display: flex">
  <button class="skill-button" style="width: fit-content; height: fit-content;" [ngStyle]="{ 'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'),'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }" (click)="isVisible[0] = false; isVisible[1] = false; isVisible[2] = false; isVisible[3] = false; isVisible[4] = !isVisible[4]">
    <img [src]="turnActionStyles[heroSkills[4]].icon" [alt]="hero.skill1" class="icon-img"/>
  </button>
  <!-- Este div se muestra solo si se ha hecho clic -->
  <div *ngIf="isVisible[4]" class="actions-container" style="position: absolute;display: grid;left: 68%;" [ngStyle]="{'border': '7px ridge ' + (hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9'), 'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }">
    <div *ngFor="let turnAction of turnActions" class="action-icon-wrapper" (mouseenter)="hoveredAction = turnAction" (mouseleave)="hoveredAction = null;">
      <img *ngIf="turnAction" [src]="turnActionStyles[turnAction].icon" class="icon-img"(click)="hero.skill5 = turnAction; heroSkills[4] = turnAction; isVisible[4] =false; changeHeroSkill('s5_skill5', turnAction); triggerShineEffect(4)"/>
      <!-- Tooltip sobre la imagen -->
      <div *ngIf="hoveredAction === turnAction" class="tooltip-description"[innerHTML]="turnActionStyles[turnAction].description"></div>
    </div>
  </div>
  <!-- Información general -->
  <div class="skillButton-container">
    <p [ngClass]="{ 'spark-container': true, 'shine-effect': showSkillShine[4] }"class="skillButton"style="margin-left:10px width: 300px;margin-left: 10px;">{{ hero.skill5 }} </p>
    <div class="skillTooltip" [innerHTML]="turnActionStyles[heroSkills[4]].description"></div>
  </div>
</div>
        </div>
          </div>
        </div>
      </div>
      <!-- BOTONERA -->
      <div class="botonera1">
        <button class="normal-button" (click)="changeHero('prev')"style="height: 80px"> 
          <div class="image-container">
            <img style="max-height: 50px;" [src]="this.imageUrls['BOTON_madera_4']" alt="left"/>
          </div>
        </button>
        <button class="normal-button" (click)="onBattleClick(hero)"style="height: 80px"> 
          <div class="image-container">
            <img class="background-image" style="max-width: 250px;" [src]="this.imageUrls['BOTON_madera_8']" alt="start"/>
            <div class="overlay-text">START BATTLE</div>
          </div>
        </button>
        <button class="normal-button" (click)="changeHero('next')"style="height: 80px"> 
          <div class="image-container">
            <img style="max-height: 50px;" [src]="this.imageUrls['BOTON_madera_5']" alt="right"/>
          </div>
        </button>
    </div>
    </div>
  </div>
      
  </div>
    
  
<!--heroShop-->
<div *ngIf="state == 'heroShop'" class="left-section">
  <!-- Fila con el contenido principal: izquierda y derecha -->
  <div class="main-content-row">
    <div class="big-left-div-shop">
      <div class="hero-grid">
        <button
          *ngFor="let heroType of heroTypes"
          (click)="onHeroShopClick(heroType)"
          (mouseenter)="onHeroShopHover(heroType)"
          class="hero-button-shop"
          [disabled]="mostrarHeroGif"
        >
          <img [src]="heroStyles[heroType].icon" alt="{{heroType}}" class="hero-image-shop" />
        </button>
      </div>
    </div>

    <div class="right-columns">
      <div class="second-right-column">
        <div class="half-first-column-div">
          <h3>{{ heroType }}</h3>
          <p>{{ heroDescription }}</p>
        </div>
        <div class="half-second-column-div">
          <p>price: <label class="hero-label" style="background-color: #966e64; padding: 5px; padding-left: 10px; border-radius: 6px;">{{heroStyles[heroType].price}}<img [src]="imageUrls['GOLD']" class="hero-image-button" style="width: 30px;margin-left: 10px;vertical-align: bottom;"/></label></p>
        </div>
        <div class="half-second-column-div">
          <p>skill1: STANDARD ATACK </p>
          <p>skill2: STANDARD ATACK</p>
          <p>skill3: STANDARD ATACK</p>
          <p>skill4: STANDARD ATACK</p>
          <p>skill5: STANDARD ATACK</p>
        </div>
      </div>
    </div>
  </div>

    
  <div *ngIf="mostrarHeroGif" [ngClass]="{ 'gif-overlay': true, 'fade-out': desapareciendo }">
    <div class="gif-center">
      <img *ngIf="gifHeroUrl" [src]="gifHeroUrl" alt="heroGif" />
    </div>
  </div>
</div>


<!-- MapSection -->
<div *ngIf="state == 'map'" class="left-section">
  <div class="main-content-row">
    <!-- Imagen izquierda -->
    <div class="background-image-obj" style="z-index: 1;"> 
      <div style="position: relative; width: 500px;height: 500px;">

        
      
        <!-- Imagen Principal -->
        <div style="position: relative;width: 100%;height: 100%; z-index: 2;">
          <img *ngIf="enemyType == null" class="background-image-obj"  style="width: 100%;height: 596px; position: relative; z-index: 2;"[src]="this.imageUrls['MARCO']"alt="start"/>
          <div *ngIf="enemyType == null" class="overlay-text" style="position: absolute; width: 300px;margin-top: 25px; font-weight: bold;z-index: 3;">Un gran bosque se extiende detrás de un lago y al fondo puede verse una montaña que rasca el cielo y reina sobre este frondoso paraje. Una forma de vida facóquera parece predominar en estas tierras, explora con cuidado.</div>
       
<div *ngIf="enemyType != null && clip == 'clipLoo'"style="width: 100%;height: 510px;">
<table style="width: 100%; height: 100%;">
  <tr>
    <!-- Primer bloque: imagen -->
    <td style="width: 200px; padding-top: 10px; padding-left: 10px;">
      <img class="background-image-obj"
           [src]="enemyStyles[enemyType].icon"
           alt="imageEnemy"
           style="width: 200px; position: relative; z-index: 2;" />
    </td>

    <!-- Segundo bloque: descripción -->
    <td style="padding-inline: 10px; padding-top: 10px;">
      <div class="background-image-obj" style="background-color: #f7d9c4bd; padding: 10px; height: 200px;">
        <h3 style="text-align: center; padding: 10px; background-color: #966e64; border: 2px solid #444; border-radius: 8px; margin-bottom: 10px;">{{enemyData.name}}</h3>
        <p>{{enemyStyles[enemyType].description}}</p>
      </div>
    </td>
  </tr>

  <!-- Segunda fila: loot ocupando todo el ancho -->
  <tr>
  <td colspan="2" style="padding: 10px;height: 100%;">
    <div class="background-image-obj" style="background-color: #f7d9c4bd; padding: 10px;height: 100%">
      <h3 style="text-align: center; padding: 10px; background-color: #966e64; border: 2px solid #444; border-radius: 8px; margin-bottom: 10px;">Posible loot</h3>
      <div style="display: flex; justify-content: center; gap: 20px; flex-wrap: wrap;">
      <div *ngFor="let item of loot; let i = index"
           style="display: flex; flex-direction: column; align-items: center;">
        <img [src]="itemStyles[item].icon" alt="posibleLoot"
             style="width: 130px; height: 130px; background-color: #a17c7371; padding: 2%; border-radius: 8px;" />
        <span style="margin-top: 5px;font-size: larger;font-weight: bold;color: #3e1e1e;">{{lootProb[i]}}</span>
      </div>
    </div>
    </div>
    
  </td>
</tr>

</table>

</div>
<div *ngIf="enemyType != null && clip == 'clipSta'"style="width: 100%;height: 510px;">
  <table style="width: 100%;height: 100%;">
    <tr>
      <td style="width: 200px;padding-top:10px;padding-left:10px;">
        <img class="background-image-obj"
             [src]="enemyStyles[enemyType].icon"
             alt="imageEnemy"
             style="width: 200px; position: relative; z-index: 2;" />
      </td>
      <td style="padding-inline: 10px; padding-top: 10px;">
        <div class="background-image-obj"style="background-color: #f7d9c4bd;padding: 10px; height: 200px;">
          <h3 style="text-align: center;padding: 10px;background-color: #966e64; border: 2px solid #444; border-radius: 8px;margin-bottom: 10px;">{{enemyData.name}}</h3>
          <p>{{enemyStyles[enemyType].description}}</p>
        </div>
      </td>
    </tr>
    <tr>
      <td style=" height: 100%;padding-top:10px;padding-left:10px;padding-bottom:10px;">
        <div class="background-image-obj"style="background-color: #f7d9c4bd; padding: 10px; height: 100%;">
            <p>Dbrutal: {{ enemyData.damageBrutal }}</p>
            <p>Dletal: {{ enemyData.damageLetal }}</p>
            <p>Dmistic: {{ enemyData.damageMistic }}</p>
            <p>Armor: {{ enemyData.armor }}</p>
            <p>Resistance: {{ enemyData.resistance }}</p>
            <p>Accuracy: {{ enemyData.accuracy }}</p>
            <p>Evasion: {{ enemyData.evasion }}</p>
            <p>Critic: {{ enemyData.critic }}</p>
            <p>MaxHealth: {{ enemyData.maxHealth }}</p>
        </div>
      </td>
      <td style=" height: 100%;padding:10px;">
        <div class="background-image-obj"style="background-color: #f7d9c4bd; padding: 10px; height: 100%;display: grid; grid-template-rows: repeat(5, 1fr);">
          <div class="skillButton-container">
            <p class="skillButton"> {{ enemyData.skill1 }} </p>
            <div class="skillTooltip" [innerHTML]="turnActionStyles[enemySkills[0]].description"></div>
          </div>
          <div class="skillButton-container">
            <p class="skillButton"> {{ enemyData.skill2 }} </p>
            <div class="skillTooltip" [innerHTML]="turnActionStyles[enemySkills[1]].description"></div>
          </div>
          <div class="skillButton-container">
            <p class="skillButton"> {{ enemyData.skill3 }} </p>
            <div class="skillTooltip" [innerHTML]="turnActionStyles[enemySkills[2]].description"></div>
          </div>
          <div class="skillButton-container">
            <p class="skillButton"> {{ enemyData.skill4 }} </p>
            <div class="skillTooltip" [innerHTML]="turnActionStyles[enemySkills[3]].description"></div>
          </div>
          <div class="skillButton-container">
            <p class="skillButton"> {{ enemyData.skill5 }} </p>
            <div class="skillTooltip" [innerHTML]="turnActionStyles[enemySkills[4]].description"></div>
          </div>
        </div>
      </td>
    </tr>
  </table>
</div>
<div *ngIf="enemyType != null && clip == 'clipDe'"style="width: 100%;height: 510px;">
  <table style="width: 100%;height: 100%;">
    <tr>
      <td style="width: 200px;padding-top:10px;padding-left:10px;">
        <img class="background-image-obj"
             [src]="heroStyles[heroType].icon"
             alt="imageEnemy"
             style="width: 200px; position: relative; z-index: 2;" 
             [ngStyle]="{ 'background-color': hero.type !== 'sin tipo' ? heroBackground : '#f9f9f9' }"/>
      </td>
      <td style="padding-inline: 10px; padding-top: 10px;">
        <div class="background-image-obj"style="background-color: #f7d9c4bd;padding: 10px; height: 200px;">
          <h3 style="text-align: center;padding: 10px;background-color: #966e64; border: 2px solid #444; border-radius: 8px;margin-bottom: 10px;">{{hero.name}}</h3>
          <p>{{heroStyles[heroType].description}}</p>
        </div>
      </td>
    </tr>
    <tr>
      <td style=" height: 100%;padding-top:10px;padding-left:10px;padding-bottom:10px;">
        <div class="background-image-obj"style="background-color: #f7d9c4bd; padding: 10px; height: 100%;">
            <p>Dbrutal: {{ hero.Dbrutal }}</p>
            <p>Dletal: {{ hero.Dletal }}</p>
            <p>Dmistic: {{ hero.Dmistic }}</p>
            <p>Armor: {{ hero.armor }}</p>
            <p>Resistance: {{ hero.resistance }}</p>
            <p>Accuracy: {{ hero.accuracy }}</p>
            <p>Evasion: {{ hero.evasion }}</p>
            <p>Critic: {{ hero.critic }}</p>
            <p>MaxHealth: {{ hero.maxHealth }}</p>
        </div>
      </td>
      <td style=" height: 100%;padding:10px;">
        <div class="background-image-obj"style="background-color: #f7d9c4bd; padding: 10px; height: 100%;display: grid; grid-template-rows: repeat(5, 1fr);">
          <div class="skillButton-container">
            <p class="skillButton"> {{ hero.skill1 }} </p>
            <div class="skillTooltip" [innerHTML]="turnActionStyles[heroSkills[0]].description"></div>
          </div>
          <div class="skillButton-container">
            <p class="skillButton"> {{ hero.skill2 }} </p>
            <div class="skillTooltip" [innerHTML]="turnActionStyles[heroSkills[1]].description"></div>
          </div>
          <div class="skillButton-container">
            <p class="skillButton"> {{ hero.skill3 }} </p>
            <div class="skillTooltip" [innerHTML]="turnActionStyles[heroSkills[2]].description"></div>
          </div>
          <div class="skillButton-container">
            <p class="skillButton"> {{ hero.skill4 }} </p>
            <div class="skillTooltip" [innerHTML]="turnActionStyles[heroSkills[3]].description"></div>
          </div>
          <div class="skillButton-container">
            <p class="skillButton"> {{ hero.skill5 }} </p>
            <div class="skillTooltip" [innerHTML]="turnActionStyles[heroSkills[4]].description"></div>
          </div>
        </div>
      </td>
    </tr>
  </table>
</div>


        <img class="background-image-obj"
             *ngIf="enemyType != null && clip == 'clipBa'"
             [src]="enemyStyles[enemyType].icon"
             alt="imageEnemy"
             style="width: 100%; position: relative; z-index: 2;" />
      </div></div>

<!-- BOTONERA -->
      <div *ngIf="enemyType != null" class="botonera1" style="margin-top: 15px;z-index: -1;">
        <button class="normal-button btn-startbattle" (click)="startBattleTimer(enemyType!)"style="height: 80px"> 
          <div class="image-container">
            <img class="background-image" style="max-width: 250px;" [src]="this.imageUrls['BOTON_madera_8']" alt="start"/>
            <div class="overlay-text" >START BATTLE</div>
          </div>
        </button>
    </div>
    </div>

    <!-- Mapa con scroll -->
    <div class="right-columns"style="margin-left: inherit;margin-right: auto;">
  <div class="map-wrapper"style="margin-left: 9px;margin-right: -11px;">
    <button [disabled]="map==1" class="normal-button"(click)="changeMap('prev')">
      <img class="background-image" [src]="this.imageUrls['BOTON_madera_4']" alt="botón izquierdo"style="width: 120px;margin-top: 150px;" />
    </button>
    <!-- Mapa 1 -->
    <div *ngIf="map == 1"class="scroll-container">
      <img [src]="this.imageUrls['MAP1']" alt="imageMap" class="map-image"/>
          <button  *ngIf="userMap1[0] % 10 !== 0 || userMap1[0] === 0" class="map-button"(click)="onEnemyClick(EnemyType.FOREST1)"[disabled]="disabledEnemies.has(EnemyType.FOREST1) || disabledEnemies.has(EnemyType.PEZ2_UP1) || disabledEnemies.has(EnemyType.JABALI7)"style="top: 85%; left: 30%;z-index: 1;">
            <img [src]="enemyStyles[EnemyType.FOREST1].missionIcon"alt="mission FOREST1"style="width: 80px; height: 80px;" />
          </button>
          <button *ngIf="userMap1[0] !== 0 && userMap1[0] % 50 !== 0 && userMap1[0] % 10 === 0"class="map-button-up1"(click)="onEnemyClick(EnemyType.PEZ2_UP1)"[disabled]="disabledEnemies.has(EnemyType.FOREST1) || disabledEnemies.has(EnemyType.PEZ2_UP1) || disabledEnemies.has(EnemyType.JABALI7)"style="top: 85%; left: 30%; z-index: 2;">
            <img [src]="enemyStyles[EnemyType.PEZ2_UP1].missionIcon"alt="mission PEZ2_UP1"style="width: 80px; height: 80px;" />
          </button>
          <button *ngIf="userMap1[0] !== 0 && userMap1[0] % 50 === 0"class="map-button"(click)="onEnemyClick(EnemyType.JABALI7)"[disabled]="disabledEnemies.has(EnemyType.FOREST1) || disabledEnemies.has(EnemyType.PEZ2_UP1) || disabledEnemies.has(EnemyType.JABALI7)"style="top: 85%; left: 30%; z-index: 3;">
            <img [src]="enemyStyles[EnemyType.JABALI7].missionIcon"alt="mission JABALI7"style="width: 80px; height: 80px;" />
          </button>

          <button class="map-button" (click)="onEnemyClick(EnemyType.GOLEM1)"[disabled]="disabledEnemies.has(EnemyType.GOLEM1)"style="top: 74%;left: 70%">
            <img [src]="enemyStyles[EnemyType.GOLEM1].missionIcon" alt="mission GOLEM1" style="width: 80px; height: 80px;" />
          </button>

          <button  *ngIf="userMap1[2] % 10 !== 0 || userMap1[2] === 0" class="map-button"(click)="onEnemyClick(EnemyType.ENT1)"[disabled]="disabledEnemies.has(EnemyType.ENT1) || disabledEnemies.has(EnemyType.ENT1_UP1) || disabledEnemies.has(EnemyType.ENT1_UP2)"style="top: 65%; left: 20%;z-index: 1;">
            <img [src]="enemyStyles[EnemyType.ENT1].missionIcon"alt="mission ENT1"style="width: 80px; height: 80px;" />
          </button>
          <button *ngIf="userMap1[2] !== 0 && userMap1[2] % 50 !== 0 && userMap1[2] % 10 === 0"class="map-button-up1"(click)="onEnemyClick(EnemyType.ENT1_UP1)"[disabled]="disabledEnemies.has(EnemyType.ENT1) || disabledEnemies.has(EnemyType.ENT1_UP1) || disabledEnemies.has(EnemyType.ENT1_UP2)"style="top: 65%; left: 20%; z-index: 2;">
            <img [src]="enemyStyles[EnemyType.ENT1_UP1].missionIcon"alt="mission ENT1_UP1"style="width: 80px; height: 80px;" />
          </button>
          <button *ngIf="userMap1[2] !== 0 && userMap1[2] % 50 === 0"class="map-button-up2"(click)="onEnemyClick(EnemyType.ENT1_UP2)"[disabled]="disabledEnemies.has(EnemyType.ENT1) || disabledEnemies.has(EnemyType.ENT1_UP1) || disabledEnemies.has(EnemyType.ENT1_UP2)"style="top: 65%; left: 20%; z-index: 3;">
            <img [src]="enemyStyles[EnemyType.ENT1_UP2].missionIcon"alt="mission ENT1_UP2"style="width: 80px; height: 80px;" />
          </button>

          <button class="map-button" (click)="onEnemyClick(EnemyType.JABALI1)"[disabled]="disabledEnemies.has(EnemyType.JABALI1)"style="top: 52%;left: 50%">
            <img [src]="enemyStyles[EnemyType.JABALI1].missionIcon" alt="mission JABALI1" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.JABALI2)"[disabled]="disabledEnemies.has(EnemyType.JABALI2)"style="top: 41%;left: 80%">
            <img [src]="enemyStyles[EnemyType.JABALI2].missionIcon" alt="mission JABALI2" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.JABALI3)"[disabled]="disabledEnemies.has(EnemyType.JABALI3)"style="top: 30%;left: 30%">
            <img [src]="enemyStyles[EnemyType.JABALI3].missionIcon" alt="mission JABALI3" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.JABALI4)"[disabled]="disabledEnemies.has(EnemyType.JABALI4)"style="top: 19%;left: 70%">
            <img [src]="enemyStyles[EnemyType.JABALI4].missionIcon" alt="mission JABALI4" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.JABALI5)"[disabled]="disabledEnemies.has(EnemyType.JABALI5)"style="top: 8%;left: 20%">
            <img [src]="enemyStyles[EnemyType.JABALI5].missionIcon" alt="mission JABALI5" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.JABALI6)"[disabled]="disabledEnemies.has(EnemyType.JABALI6)"style="top: -3%;left: 80%">
            <img [src]="enemyStyles[EnemyType.JABALI6].missionIcon" alt="mission JABALI6" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.JABALI7)"[disabled]="disabledEnemies.has(EnemyType.JABALI7)"style="top: -15%;left: 50%">
            <img [src]="enemyStyles[EnemyType.JABALI7].missionIcon" alt="mission JABALI7" style="width: 80px; height: 80px;" />
          </button>
      </div>
       <!-- Mapa 2 -->
      <div *ngIf="map == 2"class="scroll-container">
        <img [src]="this.imageUrls['MAP2']" alt="imageMap" class="map-image"/>
          <button  *ngIf="userMap2[0] % 10 !== 0 || userMap2[0] === 0" class="map-button"(click)="onEnemyClick(EnemyType.PEZ2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2) || disabledEnemies.has(EnemyType.PEZ2_UP1) || disabledEnemies.has(EnemyType.PEZ2_UP2)"style="top: 85%; left: 30%;z-index: 1;">
            <img [src]="enemyStyles[EnemyType.PEZ2].missionIcon"alt="mission PEZ2"style="width: 80px; height: 80px;" />
          </button>
          <button *ngIf="userMap2[0] !== 0 && userMap2[0] % 50 !== 0 && userMap2[0] % 10 === 0"class="map-button-up1"(click)="onEnemyClick(EnemyType.PEZ2_UP1)"[disabled]="disabledEnemies.has(EnemyType.PEZ2) || disabledEnemies.has(EnemyType.PEZ2_UP1) || disabledEnemies.has(EnemyType.PEZ2_UP2)"style="top: 85%; left: 30%; z-index: 2;">
            <img [src]="enemyStyles[EnemyType.PEZ2_UP1].missionIcon"alt="mission PEZ2_UP1"style="width: 80px; height: 80px;" />
          </button>
          <button *ngIf="userMap2[0] !== 0 && userMap2[0] % 50 === 0"class="map-button-up2"(click)="onEnemyClick(EnemyType.PEZ2_UP2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2) || disabledEnemies.has(EnemyType.PEZ2_UP1) || disabledEnemies.has(EnemyType.PEZ2_UP2)"style="top: 85%; left: 30%; z-index: 3;">
            <img [src]="enemyStyles[EnemyType.PEZ2_UP2].missionIcon"alt="mission PEZ2_UP2"style="width: 80px; height: 80px;" />
          </button>
          <button  *ngIf="userMap2[0] % 10 !== 0 || userMap2[0] === 0" class="map-button"(click)="onEnemyClick(EnemyType.PEZ2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2) || disabledEnemies.has(EnemyType.PEZ2_UP1) || disabledEnemies.has(EnemyType.PEZ2_UP2)"style="top: 74%; left: 70%;z-index: 1;">
            <img [src]="enemyStyles[EnemyType.PEZ2].missionIcon"alt="mission PEZ2"style="width: 80px; height: 80px;" />
          </button>
          <button *ngIf="userMap2[0] !== 0 && userMap2[0] % 50 !== 0 && userMap2[0] % 10 === 0"class="map-button-up1"(click)="onEnemyClick(EnemyType.PEZ2_UP1)"[disabled]="disabledEnemies.has(EnemyType.PEZ2) || disabledEnemies.has(EnemyType.PEZ2_UP1) || disabledEnemies.has(EnemyType.PEZ2_UP2)"style="top: 74%; left: 70%; z-index: 2;">
            <img [src]="enemyStyles[EnemyType.PEZ2_UP1].missionIcon"alt="mission PEZ2_UP1"style="width: 80px; height: 80px;" />
          </button>
          <button *ngIf="userMap2[0] !== 0 && userMap2[0] % 50 === 0"class="map-button-up2"(click)="onEnemyClick(EnemyType.PEZ2_UP2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2) || disabledEnemies.has(EnemyType.PEZ2_UP1) || disabledEnemies.has(EnemyType.PEZ2_UP2)"style="top: 74%; left: 70%; z-index: 3;">
            <img [src]="enemyStyles[EnemyType.PEZ2_UP2].missionIcon"alt="mission PEZ2_UP2"style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.PEZ2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2)"style="top: 65%;left: 20%">
            <img [src]="enemyStyles[EnemyType.PEZ2].missionIcon" alt="mission PEZ2" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.PEZ2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2)"style="top: 52%;left: 50%">
            <img [src]="enemyStyles[EnemyType.PEZ2].missionIcon" alt="mission PEZ2" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.PEZ2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2)"style="top: 41%;left: 80%">
            <img [src]="enemyStyles[EnemyType.PEZ2].missionIcon" alt="mission PEZ2" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.PEZ2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2)"style="top: 30%;left: 30%">
            <img [src]="enemyStyles[EnemyType.PEZ2].missionIcon" alt="mission PEZ2" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.PEZ2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2)"style="top: 19%;left: 70%">
            <img [src]="enemyStyles[EnemyType.PEZ2].missionIcon" alt="mission PEZ2" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.PEZ2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2)"style="top: 8%;left: 20%">
            <img [src]="enemyStyles[EnemyType.PEZ2].missionIcon" alt="mission PEZ2" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.PEZ2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2)"style="top: -3%;left: 80%">
            <img [src]="enemyStyles[EnemyType.PEZ2].missionIcon" alt="mission PEZ2" style="width: 80px; height: 80px;" />
          </button>
          <button class="map-button" (click)="onEnemyClick(EnemyType.PEZ2)"[disabled]="disabledEnemies.has(EnemyType.PEZ2)"style="top: -15%;left: 50%">
            <img [src]="enemyStyles[EnemyType.PEZ2].missionIcon" alt="mission PEZ2" style="width: 80px; height: 80px;" />
          </button>
      </div>
      <button [disabled]="map==2" class="normal-button"(click)="changeMap('next')">
        <img class="background-image" [src]="this.imageUrls['BOTON_madera_5']" alt="botón izquierdo"style="width: 120px;margin-top: 150px;" />
      </button>

      <!-- Botón debajo -->
       <button *ngIf="enemyType" class="normal-button btn-loot"(click)="onClipClick('clipLoo')"style="position: absolute; top: 20px; left: 0;">
          <div class="image-container" style="position: relative; display: inline-block;">
            <img class="background-image" style="max-width: 250px; display: block;"[src]="this.imageUrls['BOTON_madera_8']"alt="start"/>
            <div class="overlay-text"style="position: absolute;left: 180px;font-weight: bold;">LOOT</div>
          </div>
        </button>
        <button *ngIf="enemyType" class="normal-button btn-stats"(click)="onClipClick('clipSta')"style="position: absolute; top: 20px; left: 0;">
          <div class="image-container" style="position: relative; display: inline-block;">
            <img class="background-image" style="max-width: 250px; display: block;"[src]="this.imageUrls['BOTON_madera_8']"alt="start"/>
            <div class="overlay-text"style="position: absolute;left: 180px;font-weight: bold;">ENEMY</div>
          </div>
        </button>
        <button *ngIf="enemyType" class="normal-button btn-desc"(click)="onClipClick('clipDe')"style="position: absolute; top: 20px;; left: 0px;;">
          <div class="image-container" style="position: relative; display: inline-block;">
            <img class="background-image" style="max-width: 250px; display: block;"[src]="this.imageUrls['BOTON_madera_8']"alt="start"/>
            <div class="overlay-text"style="position: absolute;left: 170px;font-weight: bold">HERO</div>
          </div>
        </button>
        <button *ngIf="enemyType" class="normal-button btn-battle"(click)="onClipClick('clipBa')"style="position: absolute; top: 20px;; left: 0px;">
          <div class="image-container" style="position: relative; display: inline-block;">
            <img class="background-image" style="max-width: 250px; display: block;"[src]="this.imageUrls['BOTON_madera_8']"alt="start"/>
            <div class="overlay-text"style="position: absolute;left: 180px;font-weight: bold;">BATTLE</div>
          </div>
        </button>
    </div>
</div>
  </div>
</div>

<!-- PANTALLA DE GIF-->
 <div *ngIf="mostrarBattleGif" class="gif-overlay">
  <div class="gif-content">
                                     <!-- GIF principal -->
    <div *ngIf="gifBattleUrl" class="gif-center">
      <img [src]="gifBattleUrl" alt="battleGif" />
    </div>
                                     <!-- Ítems obtenidos -->
    <div class="reward-items">
      <div style="position: relative; width: 50px; height: 50px;">
        <img [src]="itemStyles[item1].icon" alt="reward1" style="width: 100%; height: 100%; background-color: #a17c7371; padding: 2%; border-radius: 8px;" />
        <img *ngIf="itemStyles[item1].grade != GradeType.F" [src]="gradeStyles[itemStyles[item1].grade].icon" style="position: absolute; bottom: 0; left: 0; width: 20px; height: 20px; background-color: #e7a78a; border-radius: 50%; border: 2px solid #2e0b02;" />
      </div>
      <div style="position: relative; width: 50px; height: 50px;">
        <img [src]="itemStyles[item2].icon" alt="reward2" style="width: 100%; height: 100%; background-color: #a17c7371; padding: 2%; border-radius: 8px;" />
        <img *ngIf="itemStyles[item2].grade != GradeType.F" [src]="gradeStyles[itemStyles[item2].grade].icon" style="position: absolute; bottom: 0; left: 0; width: 20px; height: 20px; background-color: #e7a78a; border-radius: 50%; border: 2px solid #2e0b02;" />
      </div>
      <div style="position: relative; width: 50px; height: 50px;">
        <img [src]="itemStyles[item3].icon" alt="reward3" style="width: 100%; height: 100%; background-color: #a17c7371; padding: 2%; border-radius: 8px;" />
        <img *ngIf="itemStyles[item3].grade != GradeType.F"[src]="gradeStyles[itemStyles[item3].grade].icon" style="position: absolute; bottom: 0; left: 0; width: 20px; height: 20px; background-color: #e7a78a; border-radius: 50%; border: 2px solid #2e0b02;" />
      </div>
    </div>
                                      <!-- Botonera -->
    <div class="botonera1" style="margin-top: 10px; display: flex; gap: 10px;height: fit-content;padding: 5px;">
      <button class="normal-button btn-startbattle"> 
        <div class="image-container">
          <img class="background-image" style="max-width: 150px;" [src]="imageUrls['BOTON_madera_8']" alt="log" />
          <div class="overlay-text" style="font-size: 12px;">LOG</div>
        </div>
      </button>
      <button class="normal-button btn-startbattle" (click)="exitBattleGif()"> 
        <div class="image-container">
          <img class="background-image" style="max-width: 150px;" [src]="imageUrls['BOTON_madera_8']" alt="exit" />
          <div class="overlay-text" style="font-size: 12px;">EXIT</div>
        </div>
      </button>
    </div>

  </div>
</div>
<!--//////--> 
<!--ItemDetails-->
  <div *ngIf="state == 'itemDetails'"class="left-section">
    <!--Preference 1-->
    <div *ngIf="mainClip == 'clipSto' && preference_storage == 1"style="width: 127%; max-height: 626px; overflow-y: auto; padding: 10px; display: grid; grid-template-columns: 1fr 1fr 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr 1fr 1fr; gap: 10px; background-color: #966e64d2; border: 4px solid #5c3a1e; border-radius: 12px; box-shadow: inset 0 0 10px #3b1e0f; align-items: stretch;">
      <div *ngFor="let item of items"class="skillButton-container" style="position: relative;width: 110px;height: 110px;aspect-ratio: 1;background-color: #f8d3bd;border: 3px solid #3b1e0f;border-radius: 8px;box-shadow: 2px 2px 5px #00000066;display: flex;align-items: center;justify-content: center;cursor: pointer;"(click)="onItemClick(item)">
        <!-- Icono del ítem, grado y cantidad-->
        <img [src]="item.icon" [alt]="item.name" style="width: 110px;height: 110px;border-radius: 8px; z-index: 1;" />
        <img [src]="gradeStyles[item.grade].icon"[alt]="item.grade" style="z-index: 9;position: absolute;width: 30px;height: 30px;bottom: 5px;left: 5px;background-color: #e7a78a;border-radius: 50%;border: 2px solid #2e0b02;"/>
        <p style="position: absolute;top: 3px;right: 5px;background-color: #e7a78a;color: #2e0b02;font-weight: bold;border: 2px solid #2e0b02;border-radius: 50%;width: 25px;height: 25px;display: flex;align-items: center;justify-content: center;font-family: 'MedievalSharp', serif;z-index: 2;">{{ item.amount }}</p>
        <!-- Descripción flotante-->
        <div *ngIf="item.attributes[0] > 0 || item.attributes[1] > 0 || item.attributes[2] > 0 || item.attributes[3] > 0 || item.attributes[4] > 0 || item.attributes[5] > 0 || item.attributes[6] > 0 || item.attributes[7] > 0 || item.attributes[8] > 0 " class="skillTooltip"style="width: 120px; height: fit-content; border-radius: 12px;font-size: 16px;left:0px;top:10px;">
           <p *ngIf="item.attributes[0] > 0">Dbrutal +{{item.attributes[0]}}</p>
           <p *ngIf="item.attributes[1] > 0">Dletal +{{item.attributes[1]}}</p>
           <p *ngIf="item.attributes[2] > 0">Dmistic +{{item.attributes[2]}}</p>
           <p *ngIf="item.attributes[3] > 0">armor +{{item.attributes[3]}}</p>
           <p *ngIf="item.attributes[4] > 0">resistance +{{item.attributes[4]}}</p>
           <p *ngIf="item.attributes[5] > 0">accuracy +{{item.attributes[5]}}</p>
           <p *ngIf="item.attributes[6] > 0">evasion +{{item.attributes[6]}}</p>
           <p *ngIf="item.attributes[7] > 0">critic +{{item.attributes[7]}}</p>
           <p *ngIf="item.attributes[8] > 0">maxHealth +{{item.attributes[8]}}</p>
        </div>
      </div>
    </div>
    <!--Preference 2-->
    <div *ngIf="mainClip == 'clipSto'&& preference_storage == 2"style="width: 127%; max-height: 626px; overflow-y: auto; padding: 10px; display: grid; grid-template-columns: 1fr; grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr 1fr; gap: 10px; background-color: #966e64d2; border: 4px solid #5c3a1e; border-radius: 12px; box-shadow: inset 0 0 10px #3b1e0f; align-items: stretch;">
      <div *ngFor="let item of items"class="button-wrapper" (click)="onItemClick(item)">
        <!-- Icono del ítem y bonificaciones-->
        <button class="hero-button" style="width: 100%; padding: 0; box-shadow: 1px 1px 10px #130401fd;">
          <div class="button-content" style="align-items: center;">
            <img [src]="item.icon" [alt]="item.name" class="hero-image-button" style="max-width: 70px; max-height: 70px;width: 70px;height: 70px;border-radius: 8px;border:1px solid #2e0b02be; background-color: #2e0b0293;" />
            <img [src]="gradeStyles[item.grade].icon"[alt]="item.grade" style="z-index: 9;width: 30px;height: 30px;bottom: 5px;left: 5px;background-color: #e7a78a;border-radius: 50%;border: 2px solid #2e0b02;"/>
            <p style="top: 3px;right: 5px;background-color: #e7a78a;color: #2e0b02;font-weight: bold;border: 2px solid #2e0b02;border-radius: 50%;width: 25px;height: 25px;display: flex;align-items: center;justify-content: center;font-family: 'MedievalSharp', serif;">{{ item.amount }}</p>
          </div>
          <div>
           <p *ngIf="item.attributes[0] > 0">Dbrutal +{{item.attributes[0]}}</p>
           <p *ngIf="item.attributes[1] > 0">Dletal +{{item.attributes[1]}}</p>
           <p *ngIf="item.attributes[2] > 0">Dmistic +{{item.attributes[2]}}</p>
           <p *ngIf="item.attributes[3] > 0">armor +{{item.attributes[3]}}</p>
           <p *ngIf="item.attributes[4] > 0">resistance +{{item.attributes[4]}}</p>
           <p *ngIf="item.attributes[5] > 0">accuracy +{{item.attributes[5]}}</p>
           <p *ngIf="item.attributes[6] > 0">evasion +{{item.attributes[6]}}</p>
           <p *ngIf="item.attributes[7] > 0">critic +{{item.attributes[7]}}</p>
           <p *ngIf="item.attributes[8] > 0">maxHealth +{{item.attributes[8]}}</p>
        </div>
        </button>
      </div>
    </div>
    <div class="right-section" style="width: 100%;height: 626px;gap: 0px; margin-left: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;">
      <!--<div *ngIf="soldEffect" style="position: absolute;transform: translate(-0%, 170%);z-index: 9;background: radial-gradient(circle, #ffefba, #ffffff00);border: 3px solid #f8d3bd;border-radius: 12px;padding: 20px 40px;color: #3b1e0f;font-family: 'MedievalSharp', serif;font-size: 24px;font-weight: bold;animation: fadeOut 1s ease-out forwards;pointer-events: none;">
        SOLD!
      </div>-->
      
      <!-- Imagen del ítem venta-->
      <img *ngIf="item == null"[src]="imageUrls['GOLD']" alt="a" style="height: 50%; margin-bottom: 40px;" />
      <div *ngIf="item != null" class="item-title-container">
        <span class="item-title">{{ item.name }}</span>
      </div>
      <div *ngIf="item != null" class="medieval-frame">
        <img  [src]="item.icon" alt="a" />
      </div>
      
      <!-- Barra de cantidad venta -->
      <div *ngIf="item != null"style="position: relative; width: 60%; margin-bottom: 15px;">
        <div style="position: absolute;top: 10px;left: 0;right: 0;text-align: center;font-family: 'MedievalSharp', serif;color: #3b1e0f;font-weight: bold;">
          Quantity: {{ selectedAmount }}
          Total: {{ selectedAmount*item.price }}
          <img [src]="imageUrls['GOLD']" class="hero-image-button" style="width: 30px; vertical-align: bottom; padding-bottom: 1px;"/>
        </div>
        <input type="range"min="1"[max]="item.amount"[(ngModel)]="selectedAmount" style="width: 100%;height: 10px;margin-top: 40px; background: linear-gradient(to right, #a0522d, #8b4513);border: 2px solid #3b1e0f;border-radius: 8px; outline: none;accent-color: #5c3a1e;box-shadow: 0 0 5px #3b1e0f;"/>
      </div>
      <!-- Botón de venta -->
      <button *ngIf="item != null" class="normal-button" style="width: 200px; height: 80px;" (click)="onSellItemClick(item)">
        <div class="image-container" style="width: 200px;">
          <img class="background-image"[src]="this.imageUrls['BOTON_madera_8']"alt="start" style="width: 180px;"/>
          <div class="overlay-text">SELL</div>
        </div>
      </button>
    </div>
  </div>
<!--/////////////-->
<!--CrafterDetails-->
  <div *ngIf="state == 'crafterDetails'"class="left-section" style="padding: 10px; gap:0px">
    <div *ngIf="mainClip == 'clipSto'"style="width: 127%; max-height: 626px; overflow-y: auto; padding: 10px; display: grid; grid-template-columns: 1fr; grid-template-rows: 1fr 1fr 1fr 1fr 1fr 1fr 1fr; gap: 10px; background-color: #966e64d2; border: 4px solid #5c3a1e; border-radius: 12px; box-shadow: inset 0 0 10px #3b1e0f; align-items: stretch;">
      <div *ngFor="let item of itemsToCraft"class="button-wrapper" (click)="onItemClick(item)">
        <!-- Icono del ítem y bonificaciones-->
        <button class="hero-button" style="width: 100%; padding: 0; box-shadow: 1px 1px 10px #130401fd;">
          <div class="button-content" style="align-items: center;">
            <img [src]="item.icon" [alt]="item.name" class="hero-image-button" style="max-width: 70px; max-height: 70px;width: 70px;height: 70px;border-radius: 8px;border:1px solid #2e0b02be; background-color: #2e0b0293;" />
          </div>
          <div>
           <p *ngIf="item.attributes[0] > 0">Dbrutal +{{item.attributes[0]}}</p>
           <p *ngIf="item.attributes[1] > 0">Dletal +{{item.attributes[1]}}</p>
           <p *ngIf="item.attributes[2] > 0">Dmistic +{{item.attributes[2]}}</p>
           <p *ngIf="item.attributes[3] > 0">armor +{{item.attributes[3]}}</p>
           <p *ngIf="item.attributes[4] > 0">resistance +{{item.attributes[4]}}</p>
           <p *ngIf="item.attributes[5] > 0">accuracy +{{item.attributes[5]}}</p>
           <p *ngIf="item.attributes[6] > 0">evasion +{{item.attributes[6]}}</p>
           <p *ngIf="item.attributes[7] > 0">critic +{{item.attributes[7]}}</p>
           <p *ngIf="item.attributes[8] > 0">maxHealth +{{item.attributes[8]}}</p>
        </div>
        </button>
      </div>
    </div>
    <div class="right-section" style="width: 100%;height: 626px;gap: 0px; margin-left: 10px;display: flex;flex-direction: column;justify-content: center;align-items: center;">
<!-- Efecto de crafteo-->
      <div *ngIf="craftedItemsType?.length" class="craft-animation-container">
  <div
    *ngFor="let item of craftedItemsType; let i = index"
    class="craft-item"
    [ngStyle]="getStyle(i, craftedItemsType.length)"
  >
   <img [src]="itemStyles[item].icon" class="hero-image-button" style="max-width: 70px; max-height: 70px;width: 70px;height: 70px;border-radius: 8px;border:1px solid #2e0b02e3; background-color: #2e0b02e3;" />
   <img [src]="gradeStyles[itemStyles[item].grade].icon" style="position: absolute;z-index: 9;width: 20px;height: 20px;bottom: -1px;left: -5px;background-color: #e7a78a;border-radius: 50%;border: 2px solid #2e0b02;"/>         
  </div>
</div>
      <!-- Imagen del ítem crafteable-->
      <img *ngIf="item == null"[src]="crafter.icon" alt="a" style="height: 50%; margin-bottom: 40px;border-radius: 20px;" />
      <div *ngIf="item != null" class="item-title-container">
        <span class="item-title">{{ item.name }}</span>
      </div>
      <div *ngIf="item != null" class="medieval-frame">
        <img  [src]="item.icon" alt="a" />
      </div>
      <!-- ítems necesarios para el crafteo-->
      <div *ngIf="item != null" class="reward-items" style="margin-bottom: 30px;">
        <!-- ítem 1 necesario-->
        <div style="position: relative; width: 50px; height: 50px;">
          <div style="display: flex">
            <button class="skill-button" style="border: none;width: fit-content; height: fit-content;" (click)="isVisible[0] = !isVisible[0]; isVisible[1] = false; isVisible[2] = false;">
              <img [src]="itemStyles[item1].icon" alt="need1" style="width: 100%; height: 100%;  padding: 2%; border-radius: 8px;"[ngClass]="{ 'bg-green': item1Have, 'bg-red': !item1Have }" />
              <img [src]="gradeStyles[itemStyles[item1].grade].icon"[alt]="item.grade" style="position: absolute;z-index: 9;width: 20px;height: 20px;bottom: -1px;left: 0px;background-color: #e7a78a;border-radius: 50%;border: 2px solid #2e0b02;"/>
              <p style="position: absolute;font-size: 12px;top: 0px;right: 0px;color: #2e0b02;font-weight: bold;border: 2px solid #2e0b02;border-radius: 50%;width: 20px;height: 20px;display: flex;align-items: center;justify-content: center;font-family: 'MedievalSharp', serif;"[ngClass]="{ 'bg-green': item1Have, 'bg-red': !item1Have }">{{ item1Amount*selectedAmount }}</p>
            </button>
            <div *ngIf="isVisible[0]" class="actions-container" style="transform: translate(-85px, -120px);display: flex;position: absolute;top: 60px;background-color: #2e0b02bd;border: 2px solid #1f0702;border-radius: 8px;padding: 2px;gap: 2px;">
              <div *ngFor="let grade of grades; let i = index" class="action-icon-wrapper" (mouseenter)="hoveredAction = grade" (mouseleave)="hoveredAction = null" style="position: relative;display: inline-block;height: 40px;width: 40px;align-self: center;align-items: center;margin:0" >
                <img [src]="itemStyles[item1].icon" alt="need1" style="width: 40px; padding: 2%; border-radius: 8px;background-color: #f1c4ae;border: 2px solid #2e0b02;"(click)="item.ItemsNeeds[0]=item1.slice(0, -1)+(i+1);isVisible[0] = false; onItemClick(item)" />
                <img [src]="gradeStyles[grade].icon"[alt]="item.grade" style="position: absolute;z-index: 9;width: 16px;height: 16px;bottom: 0px;left: 0px;background-color: #e7a78a;border-radius: 50%;border: 2px solid #2e0b02;"(click)="item.ItemsNeeds[0]=item1.slice(0, -1)+(i+1);isVisible[0] = false; onItemClick(item)"/>
              </div>
            </div>
          </div>
        </div>
        <!-- ítem 2 necesario-->
        <div style="position: relative; width: 50px; height: 50px;">
          <div style="display: flex">
            <button class="skill-button" style="border: none;width: fit-content; height: fit-content;" (click)="isVisible[0] = false; isVisible[1] = !isVisible[1]; isVisible[2] = false;">
              <img [src]="itemStyles[item2].icon" alt="need2" style="width: 100%; height: 100%;  padding: 2%; border-radius: 8px;"[ngClass]="{ 'bg-green': item2Have, 'bg-red': !item2Have }" />
              <img [src]="gradeStyles[itemStyles[item2].grade].icon"[alt]="item.grade" style="position: absolute;z-index: 9;width: 20px;height: 20px;bottom: -1px;left: 0px;background-color: #e7a78a;border-radius: 50%;border: 2px solid #2e0b02;"/>
              <p style="position: absolute;font-size: 12px;top: 0px;right: 0px;color: #2e0b02;font-weight: bold;border: 2px solid #2e0b02;border-radius: 50%;width: 20px;height: 20px;display: flex;align-items: center;justify-content: center;font-family: 'MedievalSharp', serif;"[ngClass]="{ 'bg-green': item2Have, 'bg-red': !item2Have }">{{ item2Amount*selectedAmount }}</p>
            </button>
            <div *ngIf="isVisible[1]" class="actions-container" style="transform: translate(-85px, -120px);display: flex;position: absolute;top: 60px;background-color: #2e0b02bd;border: 2px solid #1f0702;border-radius: 8px;padding: 2px;gap: 2px;">
              <div *ngFor="let grade of grades; let i = index" class="action-icon-wrapper" (mouseenter)="hoveredAction = grade" (mouseleave)="hoveredAction = null" style="position: relative;display: inline-block;height: 40px;width: 40px;align-self: center;align-items: center;margin:0" >
                <img [src]="itemStyles[item2].icon" alt="need2" style="width: 40px; padding: 2%; border-radius: 8px;background-color: #f1c4ae;border: 2px solid #2e0b02;"(click)="item.ItemsNeeds[1]=item2.slice(0, -1)+(i+1);isVisible[1] = false; onItemClick(item)" />
                <img [src]="gradeStyles[grade].icon"[alt]="item.grade" style="position: absolute;z-index: 9;width: 16px;height: 16px;bottom: 0px;left: 0px;background-color: #e7a78a;border-radius: 50%;border: 2px solid #2e0b02;"(click)="item.ItemsNeeds[1]=item2.slice(0, -1)+(i+1);isVisible[1] = false; onItemClick(item)"/>
              </div>
            </div>
          </div>
        </div>
        <!-- ítem 3 necesario-->
        <div style="position: relative; width: 50px; height: 50px;">
          <div style="display: flex">
            <button class="skill-button" style="border: none;width: fit-content; height: fit-content;" (click)="isVisible[0] = false; isVisible[1] = false; isVisible[2] = !isVisible[2];">
              <img [src]="itemStyles[item3].icon" alt="need3" style="width: 100%; height: 100%;  padding: 2%; border-radius: 8px;"[ngClass]="{ 'bg-green': item3Have, 'bg-red': !item3Have }" />
              <img [src]="gradeStyles[itemStyles[item3].grade].icon"[alt]="item.grade" style="position: absolute;z-index: 9;width: 20px;height: 20px;bottom: -1px;left: 0px;background-color: #e7a78a;border-radius: 50%;border: 2px solid #2e0b02;"/>
              <p style="position: absolute;font-size: 12px;top: 0px;right: 0px;color: #2e0b02;font-weight: bold;border: 2px solid #2e0b02;border-radius: 50%;width: 20px;height: 20px;display: flex;align-items: center;justify-content: center;font-family: 'MedievalSharp', serif;"[ngClass]="{ 'bg-green': item3Have, 'bg-red': !item3Have }">{{ item3Amount*selectedAmount }}</p>
            </button>
            <div *ngIf="isVisible[2]" class="actions-container" style="transform: translate(-85px, -120px);display: flex;position: absolute;top: 60px;background-color: #2e0b02bd;border: 2px solid #1f0702;border-radius: 8px;padding: 2px;gap: 2px;">
              <div *ngFor="let grade of grades; let i = index" class="action-icon-wrapper" (mouseenter)="hoveredAction = grade" (mouseleave)="hoveredAction = null" style="position: relative;display: inline-block;height: 40px;width: 40px;align-self: center;align-items: center;margin:0" >
                <img [src]="itemStyles[item3].icon" alt="need3" style="width: 40px; padding: 2%; border-radius: 8px;background-color: #f1c4ae;border: 2px solid #2e0b02;"(click)="item.ItemsNeeds[2]=item3.slice(0, -1)+(i+1);isVisible[2] = false; onItemClick(item)" />
                <img [src]="gradeStyles[grade].icon"[alt]="item.grade" style="position: absolute;z-index: 9;width: 16px;height: 16px;bottom: 0px;left: 0px;background-color: #e7a78a;border-radius: 50%;border: 2px solid #2e0b02;"(click)="item.ItemsNeeds[2]=item1.slice(0, -1)+(i+1);isVisible[2] = false; onItemClick(item)"/>
              </div>
            </div>
          </div>
        </div>
      </div>
      <!-- Barra de cantidad crafteable -->
      <div *ngIf="item != null && item.type !='RAW'"style="position: relative; width: 60%; margin-bottom: 15px;">
        <div style="position: absolute;top: -20px;left: 0;right: 0;text-align: center;font-family: 'MedievalSharp', serif;color: #3b1e0f;font-weight: bold;">
          Quantity: {{ selectedAmount }}
          Total: {{ getCraftTotal(item.price, selectedAmount) }}
          <img [src]="imageUrls['GOLD']" class="hero-image-button" style="width: 30px; vertical-align: bottom; padding-bottom: 1px;"/>
        </div>
        <input type="range"min="1"[max]="10"[(ngModel)]="selectedAmount"(ngModelChange)="checkItemRequirements(item)" style="width: 100%;height: 10px;background: linear-gradient(to right, #a0522d, #8b4513);border: 2px solid #3b1e0f;border-radius: 8px; outline: none;accent-color: #5c3a1e;box-shadow: 0 0 5px #3b1e0f;"/>
      </div>
      <!-- Botón de crafteo -->
      <button *ngIf="item != null"[disabled]="!item1Have || !item2Have || !item3Have" class="normal-button" style="width: 200px; height: 80px;"(click)="craftItem(selectedAmount)">
        <div class="image-container" style="width: 200px;">
          <img class="background-image"[src]="this.imageUrls['BOTON_madera_8']"alt="start" style="width: 180px;"/>
          <div class="overlay-text">CRAFT</div>
        </div>
      </button>
    </div>
  </div>
<!--/////////////-->















 <div>
  <!-- Sección derecha recursos -->
  <div class="right-section" style="margin: 0 auto 10px auto;width: 357px;background-color: #503028d2;">
    <div class="button-wrapper">
        <div class="button-content" style="width: fit-content;">
          <img [src]="imageUrls['GOLD']" class="hero-image-button" style="width: 30px; vertical-align: bottom; padding-bottom: 1px;"/>
          <label class="hero-label" style="background-color: #966e64; padding: 5px; margin-right: 10px;width: 64px; border-radius: 6px;">{{gold}}</label>
          <img [src]="imageUrls['ADD']" class="hero-image-button" style="width: 30px;"/>
          <label class="hero-label"style="background-color: #966e64; padding: 5px; margin-right: 10px;width: 64px;border-radius: 6px;">100000</label>
          <img [src]="imageUrls['ADD']" class="hero-image-button" style="width: 30px;"/>
          <label class="hero-label"style="background-color: #966e64; padding: 5px;width: 64px;border-radius: 6px;">1000</label>
       </div>
      </div>
  </div>
  <!-- Sección derecha heroes*ngIf="mainClip =='clipHo'"-->
<div *ngIf="mainClip =='clipHo'" class="right-section">
  <div *ngFor="let hero of heroes" class="button-wrapper" style="position: relative;">
    
    <!-- TEMPORIZADOR DECORATIVO -->
    <button *ngIf="hero.state[1]!=''" class="timer-frame"[disabled]="true">
      {{ timerDisplay[hero.ID] }}
    </button>

    <!-- BOTÓN DE BATALLA -->
<button
  *ngIf="hero.state[0] && hero.state[1] == ''"
  class="battle-done-button animated-button"
  (click)="onStartBattleClick(hero)">
  Batalla terminada
</button>

    <!-- BOTÓN DEL HÉROE -->
    <button (click)="onHeroClick(hero)" class="hero-button">
      <div class="button-content">
        <img [src]="hero.icon" alt="{{ hero.name }}" class="hero-image-button" />
        <label class="hero-label">{{ hero.name }}</label>
      </div>
    </button>
  </div>

  <!-- BOTÓN DE SHOP -->
  <div class="button-wrapper">
    <button class="hero-button" (click)="onShopClick()" style="justify-content: center;border: 2px solid #5a3e2b;">
      <div class="button-content">
        <img [src]="imageUrls['ADD']" class="hero-image-button" />
      </div>
    </button>
  </div>
</div>
<!-- Sección derecha items
    <div *ngIf="mainClip =='clipSto'" class="right-section" style="grid-template-columns: 1fr 1fr 1fr 1fr;">
      <div *ngFor="let item of items" class="button-wrapper">
        <button  class="hero-button"style="width: 90px;">
          <div class="button-content"style="width: fit-content;">
            <img [src]="item.icon" alt="{{ item.name }}" class="hero-image-button" />
            <label class="hero-label">x {{ item.amount }}</label>
          </div>
        </button>
      </div>
    </div>-->
  <!-- Sección derecha crafters-->
<div *ngIf="mainClip == 'clipSto'" class="right-section" style="grid-template-columns: 1fr; width: 416px;">
  <div *ngFor="let crafter of crafters" class="button-wrapper">
    <button class="hero-button" 
            style="width: 100%; padding: 0; box-shadow: 1px 1px 10px #130401fd; position: relative;" 
            (click)="onCrafterClick(crafter)">
      
      <!-- Level en la esquina superior derecha -->
      <div style="
        position: absolute;
        top: 5px;
        right: 5px;
        background-color: #b98d56a6;
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 14px;
        font-family: 'MedievalSharp', serif;
        font-weight: bold;
        box-shadow: 0 0 4px #00000080;
      ">
        Level {{crafter.level}}
      </div>

      <!-- Contenido: imagen + nombre + barra -->
      <div class="button-content" style="width: 100%; display: flex; align-items: center; padding: 8px; position: relative;">
        
        <!-- Imagen -->
        <img [src]="crafter.icon" alt="{{ crafter.name }}" class="hero-image-button"
          style="width: 70px; height: 70px; border-radius: 8px; border: 1px solid #2e0b02be; background-color: #2e0b0293; max-width: 60px; max-height: 60px;" />

        <!-- Nombre y barra centrados -->
        <div style="position: absolute; width: 100%; text-align: center;">
          
          <!-- Nombre -->
          <label class="hero-label"
            style="font-size: 20px; font-family: 'MedievalSharp', serif;">
            {{ crafter.name }}
          </label>
          
          <!-- Barra de experiencia centrada debajo -->
<div style="margin: 10px auto 0 auto; width: 50%; display: flex; justify-content: center;">
  <div style="position: relative;">
    <div class="life-bar-container">
      <img [src]="crafter.expBarIcon" alt="Barra de exp" class="life-bar-image" />
      <div class="life-overlay" style="font-size: 8px; color: #fad78d; margin: inherit;">
        {{ crafter.actualExp }} / {{ crafter.maxExp }}
      </div>
    </div>
  </div>
</div>


        </div>
      </div>
    </button>
  </div>
</div>






</div>

</div>
